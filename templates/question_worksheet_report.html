<!-- question_worksheet_report.html -->
{% extends "base.html" %}

{% block page_crumb %}
  <li><a href="{{ course.get_absolute_url }}"><button class="btn btn-success btn-xs"><i class="fa fa-caret-left"></i> {{ course }} Home </button></a></li>
    <li><a href="{% url 'lesson' course.slug worksheet.lesson.id %}"> <i class="fa fa-caret-left"></i> {{ worksheet.lesson }} </a></li>
    <li><a href="#">{{ worksheet }}</a></li>
{% endblock page_crumb %}

{% block content %}
<div class="col-md-12">
    <span class="label label-xs label-success pull-right"><i class="fa fa-check"></i> = correct</span>
    <span class="label label-xs label-warning pull-right"><i class="fa fa-check"></i> = incorrect</span>
    <h3>{{ worksheet }}</h3>
</div>
<div class="col-md-10 col-md-offset-1">
{% if not reports %}

    <table class="table">
        <tbody>
            <thead>
              {% if report %}<tr>
              <h2>{{ student.first_name }} {{ student.last_name }}</h2>
              <h2 class=""><b>{{ grade|floatformat:"0" }}%</b> <span class="small">({{correct}}/{{numquestions}})</span></h2>
                <th><small><em>#</em></small></th>
                <th><small><em>Question</em></small></th>
                <th><small><em>Response</em></small></th>
                <th><small><em>Correct</em></small></th>
              </tr>
              {% endif %}
            </thead>
            {% for h,i,j,k in report %}

                    {% if j %}
                    <tr class="hoverpad {% cycle 'row1' 'row2' %}">
                        <td> {{ forloop.counter }}. {% if h %}<i class="fa fa-flag flagger bkset"></i>{% endif %}</td>
                        <td><a href="{% url 'question_response' course.slug worksheet.id forloop.counter %}" class="static">{{ i.display_text | safe }}</a></td>
                        <td>{{ j | safe }}</td>
                        <td>
                            {% if k %} <span class="btn btn-xs btn-success"><i class="fa fa-check"></i></span>
                            {% else %}<span class="btn btn-xs btn-warning"><i class="fa fa-check"></i></span>
                            {% endif %}
                        </td>
                    </tr>
                    {% endif %}
            {% empty %}
                <tr>This worksheet has no responses or does not require responses.</tr>
            {% endfor %}
        </tbody>
    </table>
{% endif %}

{% if reports %}
    {% for report in reports %}
    <h4 class="">{{ report.0 }}  </h4>
    <div><span class="label label-lg label-default">{{ report.3|floatformat:"0" }}</b>%</span> <span class="small"> ({{report.2}}/{{numquestions}})</span></div>
        <table class="table">
            <tbody>
                <thead>

                  {% if report.1 %}
                  <tr>
                    <th><small><em>#</em></small></th>
                    <th><small><em>Question</em></small></th>
                    <th><small><em>Response</em></small></th>
                    <th><small><em>Correct</em></small></th>
                  </tr>
                  {% endif %}
                </thead>
                {% for h,i,j,k in report.1 %}

                        {% if j %}
                        <tr class=" {% cycle 'row1' 'row2' %}">
                            <td> {{ forloop.counter }}. {% if h %}<i class="fa fa-flag flagger bkset"></i>{% endif %}</td>
                            <td><a href="{% url 'question_response' course.slug worksheet.id forloop.counter %}" class="static">{{ i.display_text | safe }}</a></td>
                            <td>{{ j | safe }}</td>
                            <td>
                                {% if k %} <span class="btn btn-xs btn-success"><i class="fa fa-check"></i></span>
                                {% else %}<span class="btn btn-xs btn-warning"><i class="fa fa-check"></i></span>
                                {% endif %}
                            </td>
                        </tr>
                        {% endif %}

                {% endfor %}
            </tbody>
        </table>
    {% empty %}
        <div class="row">This worksheet has no responses or does not require responses.</div>
    {% endfor %}
{% endif %}
</div>
{% endblock content %}

