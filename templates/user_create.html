<!-- user_create.html -->
{% extends "base.html" %}
{% load staticfiles %}
{% load crispy_forms_tags %}

{% block page_crumb %}{% endblock page_crumb %}

{% block page_header %}
<div class="col-xs-12">
    <i class="fa fa-caret-left"></i><i class="fa fa-caret-left"></i>
    <a href="{% url 'manage_course' course.slug %}">Roster Details</button></a>
</div>
<div class="row" style="padding: 10px"><h1></h1></div>

<div class="col-md-12 text-center">
    <p class="lead">Add a New User</p>
</div>
{% endblock page_header %}

{% block content %}

<div class="col-md-6">
    <h2 class="lead">Add a new user to  {{ course }}</h2>
    {% if license_count >= license_quota %}<h5><span class="label label-danger">{{ license_count }} of {{ license_quota }} licenses used.</span></h5>{% endif %}
    <form class="well" method="post" action="." style="padding: 50px">{% csrf_token %}
        {{ form|crispy }}
        <button class="btn btn-sm btn-success" type="submit">Add User to {{ course }}</button>
    </form>
</div>



<div class="col-md-6">
    <h2 class="lead">{{ course }} Current Roster: ( <a href="{% url 'manage_course' course.slug %}" class="small text-info" title="View roster information for {{course}}."> manage roster</a> )</h2>
    {% for i in students %}
        <div class="row"> <div class="col-xs-4">{{ i.first_name }}</div> <div class="col-xs-4">{{ i.last_name }}</div> <div class="col-xs-4">{{ i.email }}</div></div>
    {% endfor %}

    <h2 class="lead">{{ course.ggv_organization }} Licenses <small>
    {{ license_count }} of {{ license_quota }} licenses in use ( <a href="{% url 'manage_org' course.ggv_organization.id %}" class="small text-info" title="View account information for {{course.ggv_organization}}."> manage organization </a> )</small></h2>
    {% for i, j in licenses.items %}
        <div class="row small">
            <div class="col-md-4">{{ j.0 }}</div>
            <div class="col-md-4">{{ j.0.first_name }} {{ j.0.last_name }}</div>
            <div class="col-md-4">
            {% for k, v in j.1.items %}
                {{ k }} <i class="{% if v.0 == 'manage' %}fa fa-user-secret{% elif v.0 == 'instructor' %}fa fa-graduation-cap{% else %}fa fa-user{% endif %}"></i>{% if not forloop.last %}, {% endif %}
            {% endfor %}
            </div>
        </div>
    {% endfor %}

    <!-- <h2 class="lead">{{ course }} Unregistered users:</h2> -->
    {% for i in unregistered %}
        <p> {{ i }} </p>
    {% endfor %}

</div>

{% endblock content %}
